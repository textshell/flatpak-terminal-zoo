#! /usr/bin/env python3

from string import Template

XTERM_TEMPLATE = Template(r"""
{
    "app-id": "de.uchuujin.fp.termzoo.xterm${xterm_version}",
    "runtime": "org.freedesktop.Platform",
    "runtime-version": "18.08",
    "sdk": "org.freedesktop.Sdk",
    "command": "xterm.TZ",
    "finish-args": ["--socket=x11", "--device=dri", "--talk-name=org.freedesktop.Flatpak"],
    "modules": [
        {
            "name": "xmu",
            "buildsystem": "autotools",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://www.x.org/releases/individual/lib/libXmu-1.1.2.tar.bz2",
                    "sha512": "eba4e3d10f7d75ba8464881fb69f295a89774a4b37793197d75f3312e3a342b2df8b7e13e3f5c887962704329b5347ff2f3395e229af9dadf46a93b1e8613cfc"
                }
            ]
        },
        {
            "name": "xaw",
            "buildsystem": "autotools",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://www.x.org/releases/individual/lib/libXaw-1.0.13.tar.bz2",
                    "sha512": "d768a39f7111802493fa1df1b80d858e4139ceeb883d45ff13ce3b7a0e775a7d2834b7ad157c8330117f04c32f38979795332dd7a119adb2344fcb1aa9cf1e2f"
                }
            ]
        },
        {
            "name": "xterm",
            "buildsystem": "simple",
            "build-commands": [
                "./configure --prefix=/app --with-app-class=XTermTZ --program-suffix=.TZ --enable-logging --enable-wide-chars --enable-luit --enable-256-color --disable-imake --enable-narrowproto --enable-exec-xterm --enable-dabbrev --enable-backarrow-is-erase --enable-sixel-graphics --with-utempter LDFLAGS='-Wl,--copy-dt-needed-entries  -L/app/lib' 'CPPFLAGS=-I/app/include -DDEF_ALLOW_FONT=False -DDEF_ALLOW_TCAP=False -DDEF_DISALLOWED_WINDOW=\\\"1,2,3,4,5,6,7,8,9,11,13,14,18,19,20,21,GetSelection,SetSelection,SetWinLines,SetXprop\\\"'",
                "make",
                "make install"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "ftp://ftp.invisible-island.net/xterm/xterm-${xterm_version}.tgz",
                    "sha512": "${xterm_sha}"
                }
            ]
        },
        {
            "name": "scripts",
            "buildsystem": "simple",
            "build-commands": [
                "install -D run-in-host /app/bin/run-in-host"
            ],
            "sources": [
                {
                    "type": "file",
                    "path": "../run-in-host"
                }
            ]
        }

    ]
}
""")


xterm_versions = (
    ('263', '2c2f0038ba7fdfd4ac52deadd16dc401d587a4df7bccbd4ecdfb90f5d577f5f43ecdf05f2e5623fed2186c85ef72dda36521a8f80d863329af9c82eb2e275297'),
    ('264', '5c93608943b50ebff76c7938c10634b985ce9f6e20c76be869766b9454668647f4c61ec25ed7a4b589dc427b6f66e9fc6651d61d9e506c12ed5a9a64821c4f80'),
    ('265', 'bc00e100b106cf6c9b588848833b7cdeaaab603a72454848348c66403d57c198006e024f3c7da24d1b8ecb1d0644dbea08f3850844300bf0d021ca46088236b2'),
    ('266', '99dcebd3c2be6d79cb8a2ab472b370c21c51f85253c530f484ff0051eb107071b2a744e3b666aba63ef49c797996607cbbe715b6482601666df2fc4d42f3ad3f'),
    ('267', 'b87e85b478aec704109fe60e1814c7592bd0530a0abdd93b0651b407b25611d0c4776c6cb10ce4365a75c1fd3e68167e9655da2f75afc6e8c6b9944275469300'),
    ('268', '406376a53afe4013ff3657b2ed4425de2aa5fbd3faec61c1698cd9c70fe72c28a10ba933ac7a5f4819f4882f6d48740c6852f2d07bd62532638239c80bc47385'),
    ('269', 'c13d618e2849460747e59c5cde74d0554b283e906452d356f14a3c8d31db1ad63b5ebbcd1afc8515f48c9bb6490eb92f8b31383c27dadb7ae9fd833e23bca66c'),
    ('270', '00388a87a062e91787dec7f49ffae3d220aef81651ed79bcd5d9a5add170b4668ed89f46efbe5ff8945c93b725234c84a2981948dacdc599dfa1f1c9f9c578fb'),
    ('271', 'ad7c926d4736e79c2dbe2d47ccb0923237b9fba9f349a964ebe13d6514bc22bb130a947b586da8a5f1ff3136706b0e9169a6bb7ae3edf30859d0e3f299aa56b9'),
    ('272', 'a923b32e7bdc4d718e3a9605a3f0204b444d63ed8f0264bff51d819862cd0a56e1978a5238f1ae829c121d1d58debcc02fd2f79d13dc9f84061f42dae6da3e02'),
    ('273', 'b5a57dc03e3617439d4f88f8b50e8f9b34c42fce790417ce95351f12345c7d0e663a570c6cae0865a4c0efa6d2684b802153076843bc963ad1761c799e3f0d71'),
    ('274', '052a969a86d378629a59738e274272b30f8cc3ee8bdb482ee19d71d4262cd73f8adb862c8b27664bf4e08b74d08e19447bb06a45def3af631ba262d41078f5df'),
    ('275', '2d71404fbed76b256e65a466c2b9edf19cbfb5b0869ca0c9fb534f855d7799caa7826ba7fc3302ce40dee5795db8d4f16e2f2ea928f753c6070afbf8119d298b'),
    ('276', 'bf1bd0f8065959fbbaaad93d8a9e8c8b60aec6ccd225d398b58330c70eb10960d90dabedaa69457d9004e7b390f681cb37ef625acbf41638b8ffade6a4cb83c7'),
    ('277', 'b0297df1fa30034cd9ebdadf00448ab3b121d77a1737f7b20cb3a686fa4456b519d929685894ac841d0048d6a956c77402037d38d11237f482c0d9116fee60da'),
    ('278', '4ddbf2003b54c2d2a082465d3ef160840dd1d27f253ba57c9c033477f6d005653093c506cd216072cf032e2ccb136de647b031a6999d8c5ccd5cfb641c50c994'),
    ('279', 'a9e5f7b7bb4f04bd412ba928f6bddafe3407be48f84f44ca55c90a2f2eb129b7d732f823c598ce9570bf85ac1fff013333e8029ac2a5364b8fdd372b1c2b8954'),
    ('280', 'ac7d3513dc527dcd4d0bd3f15a96afcecbfeb0f0888fc721ed8c0bb5a5482a0d4331912871cf1304f8008372d4e1066fb2136bff4be4f5328e02fc4c8ebb06bb'),
    ('281', 'ce5262d9c2454a2e8db19314d6d8ac68fc1b92a62fbec330486a8729d52433b38eb71172e0c2b97d91d0f95eb8c81e22dd5825c12646b0c4f86a9c9378169162'),
    ('282', '30b333617c863a01ce1eebe28ea841ce6266869c9c2d34c0ddff71fe72f264db3fae5933caa3e4616160af678227438b9d48f91727b9631a98d7b69866b7fa4c'),
    ('283', '10ec81d8b8b6722f1f75bf4b23aaa31bbc44333ecdae68504c08dd63079567592c1b47cfddf9eb48b74a99618e9a520bc3de0511b423d83bc7a3969d68da3de8'),
    ('284', 'f692ab5a76c8b655aab76473cd215f6683cfcc64ba2d28c66bd7e30ba1133e5bf98c2202c7a80d7669cd81d1667f071f408ee925c8618465432842a89108ff98'),
    ('285', 'db03dabf2e82d4125f6228da3a56dfd434a8240e26aad094568206b722da40a45500df590db2379e1508adbf8a6766ac68e0719086b9730ccdfce9fe8a058978'),
    ('286', '02b6a4852d35f55e2f215e987d5a9282b3bf8f528abd5a22220cd95327dcb843f2fa4abb8f06378ed7cd29b6b4c5b9b60d2c5885d75192016ce69d6b017cc1ba'),
    ('287', 'eddd279a5273b604a2022e5c201482d5d8d85ad2a51ae1c027a744c236b311d6ff6ccac477da27b79dfb986a61ea09edfece478aeab83fe52967af4f6ced1e17'),
    ('288', '8a4095c2e99175159618098439b3376cf76b6e5d3fa3d97e94fcee848fbf605bfbc4036cafbcd19ee6a896a9fef8df81befef95588898e426614ec17fe8455e9'),
    ('289', '2bac5b67551346174a1b964baf4e5c9168b72b3b6dfe58c9ba304f634af5c2867aad608f51de07f9b6af0a82e16d95366cd9fc535bf0faed067d70901017cfb8'),
    ('290', '187294bd97ed2876d90a9efe0519a1c11fe6fa3446a2be78c24818915af44cee8c318e5b697adc945223ea384d8bf96efebc7d709d574f6d48e04d0f6b4f56e9'),
    ('291', '2e211208b2f041043581bd8471dd1a92a92ca4e864b23f4259d0edf6a12a4445140f973f59f0e1f202b8714e215fe9f532c44aac36a6c4be1eac6d5272aabd66'),
    ('292', 'fea8ce35e0c9af63233ef87f1582935508c1ce6c59b9562c0a04b4ca236c5dd43d3a29c4b746402fa8981fed09d8c95a22364210ad5fd3f430d0750934adc8df'),
    ('293', '23e5c9594491d9244eb53c972014e4b3f1c8d38d07d73a7b89c12ad284a568e6877856022869803731cd60c4bd50c8fdb0d40f578fc0d18f96c463acf7e44b3a'),
    ('294', '888afc79f3bd63f1de8e7d42214332adc342d1a9e1f44f050129fe159052d67f164007c6543e27a6a66074ae8e6df7ab7a8e1b89094b4c74723ad66bb3e1ee4f'),
    ('295', 'cd563ab4b91415f4ebea561f71246cff111a106ad3d562cf70143211afa29716b35eebddaf54c4d8c8f2da49649c7b6c10d161e2ad3dd8635e5192ee230e6a91'),
    ('296', '601efe93cc5278f937065c6f503a13b1fb58c2cbb6a9e71419c13b95ea5db9aa3367a5b40eec369c40dd65be074fa3a5f689e29829c3047f77134f32f87b62c6'),
    ('297', '3787df65f6f4080ff8447002fcf6227898dfeb7091f3d2781d659a13cfd693cefcfa40238a663f18d3c5f45503e91763fb9d7c85d0dc44bc021446327b816c8f'),
    ('298', '04cb675db5685e28deb7c1a80ce7eb2ca9658bb2954ca741389a20f7ef7938b638656e0d361ae02f0ce628cc77f9f1f8aae6a21ec6e335ea7041b752f40db45a'),
    ('299', 'ee098d3b22b99b6cb7ca43f67a1ed206978fe985b0aa6423ca5490a0d2e462b42fd99ab96ee28006d7e46bef3900f8b6e2a7866c49928eabfd6fdf89ebc8d961'),
    ('300', '6de2b4a4403e3121c3a40cb5e935c083c2262be7bc56ad2fd76a463dd5fca3625b37cf40f73c6d86403d35e7d138be97e1c872a4d1fdd807a7c84bde18183402'),
    ('301', '7c8c21fc8dc59c40903e151838bd91271487754a8852bde6b8e6eb48a72984194fe074a61cab3cb00050f65adcfdc818fb95422c4c61a953cbc773c81ada84e0'),
    ('302', '5d548eab866c560e57a23a752dfba41fb4c13aa1ae1952d5f63d0aa71db1da6f4b52c4798b6419c290d11f854dd3a493f79999f41cdc4f0c0558eb4a73b1d8f7'),
    ('303', 'acc9cd8d5922c98ec79d3ab77038b4053b07a4e8ea9847684bbf60b1b79392872231f22e02f94e950af3b66ea66c08b3125abc91d01219bbbac74c5d4155fa3e'),
    ('304', '3faee9483933290e24eef62f60eae179d97b51a952503a97bcab68fa2bfabfe246ec74e02a9139767e533d55640bdef2cb9f2f79cae701da1735d0a83c311b66'),
    ('305', '418095e49cf1fea0295b368f58d02f75dd0b4afe642d854c4c11f82394bce735f5c97a7a56590384bf7c2cd74685fd6501cc0ec7c5e0f2166018600ceeb3c0c5'),
    ('306', '0d66bede34e50c0ea9f7b4368b15190c199b683bb6a59cc6542e918c02e5af36800c07e6a2ceb5b3df2a38661c2477c13aac674565d2b18840eb8af29fde83e4'),
    ('307', 'fd8d3d9cbd1454dffa16632f64dcfa68cef49369232fe675e953d02247fbd4314f421cedb92242f20f19c1afae82873e54b9373673fc9d4a4b7fb89ac34e6196'),
    ('308', '0e8c61fd8edd53e7619866c06b11d32933fe72c3f14bd71bceaacc32fdf92cc08770efb740d07648e9578fd8b42ec11d49f27cc8410dfa65d712679c22da8533'),
    ('309', 'c73eaca2436a26609bc7b334dac25c1330f2ddf02f788cb1c507bd0c335ea19122d9d7caba91d649fc775ef312cdf9e0e05561fe0995c9e51af4a8215e44588a'),
    ('310', 'b628bd3bfca9f6f66d5426ab7e7ed2c760704fd15281e31d7399f717455375974e2f8d281150b56719f5a5f3baa1c97a34ac7faf8befbbee90afb96c7b262e37'),
    ('311', 'eb59508702eeb4f5a637c320a8562fd475242166cc74f7fc1b6a6e6a5b287f9d55b9617ecce09186e608b2db15cf1804d5bb9dc20bc87985519f728b9ee72f17'),
    ('312', '396c17054298dd9e1adcd91fa3841dc4af25bc86fe30e0e0d342e0bcaed248d583004e2a32389c471c5628f4230e9365da30886c5c36181d5fe49bbfe0786227'),
    ('313', '9fc49dc54a2e611db508ffd00d74e71aabd3a5d5d92f05400c1ec8ae9813f497b579a84c766cf04cdd4f15aa2bd1894de91d1baa0c7ce9eabcd19725270883a8'),
    ('314', 'bce72207b6db288c3873f00b928797dfd2aaea51d183b11d377af008a1a83965bd781c648fd26d88b491197594315b2d2549cfdb44f0dbd856b269aebc31ad9f'),
    ('315', 'ac634824213001d7ac7fcd11408d9d2956b512095136162d855aa474083f3a801a7830881c9acedd2eae751928e8803170bd243e9083dac74e3ec815dfaa5996'),
    ('316', '390fa37f7a64f2bbd404f0ba8ff43a9b651a8915347821ae86342ed18da65b9f2b0de619a41e8995eeb3463adf03cd83929d175642cadd5e7d7bfebb429e1d88'),
    ('317', '43c92db70f22619cd09b6597f9c697ebf406a838388fcf10f8e34327e0e358c88c1853a0c375a0969e2f65c0689078fe4e7ca2f8f1eabd9ca89d7d32898eed55'),
    ('318', 'd1ff9b4359a49f47cc9e5e7d6311242b7beef57e554389fe3033f69263b871ad5ba89d74b428d79564f013efced2d2d36cfac987aed8ab873722fdeb8fd6abf6'),
    ('319', 'ae1d18a281ae456b527dae942f690267e4745441465496c1ad47764df03bf4c7ee8a739502d0eb5c02295b9383f3fa9e2575918cfe409259381d42c16240620d'),
    ('320', '6c234b5564ce1276136bc3ef8ef5d6703ed9dc3af3b0fd7c8c713c0876276fc4bb55cee7137f9a8c45df66531b6bd8eb778bd7660ea35c4aa8aa80ba17ba1263'),
    ('321', 'a82a3abe5cb8390dd79d547831b73394d512c2f7b6fb303665a3d01870c534f3d285667856805f79af93ee7af65c102ae31430754b86b54ddac9ce5644a192d9'),
    ('322', '12641478cf35daabf45ae4edb0015e2659ca8e9849d56a93765335fc67667ab5ad5eb06c8ca5ed1b90004c22d40a6c57bb624894217b9256d1723154bf5a0c99'),
    ('323', 'f70cb33fb0dfdcdf79560de6fc9d35a443a83f2b20d086d3cdd14f20bbf1b2da524479672701d0c298e1a06dae7f7a48ccdc0f04fbeb6cc0d5e673dd4df9ccd2'),
    ('324', 'f6f2518a11eec6e41afb10ca4ec298c566b1fc5c3b3c4c4d533311b3f64ec04c2bc692798e75bbd34382cb64eca9b21ee4b05438c4d18486046d3c710c586626'),
    ('325', '7049a013967cb90eb196684e7d6d0664cd0d7c86154fba318493d9249e973a4bf591861cbbc051a80184ef427aad75774b15d79cb571d3f82482c1b51e7a99f4'),
    ('326', '24a26adeeb07f2ed31779578d3a18d6c838bc7596521f5c826c8747b96fae1a296451f55d0046970102cf9f2ef072f6d0505dfc51378796c2834fb9af036dce1'),
    ('327', 'd9d9f3b870fea8db9ae3c076a9d85152488b2d392b9b1e2e4ebbeded287ed4911f1f63e5e035d5b3793b2506b993125c6fca437393b435a28aeb519d76147672'),
    ('328', '4f3381440394e0cd2d6c4d6645573ab2eac1c1c98e510eb0b3281ed4d2b1082e57ae58b7f756a03704eb275925ae497a1ae6c5907d6ba1b8ec95f92eaf939656'),
#    ('329', 'b6d68bde0796dc6848c02bb0f780b778226e110e7b495fd8c8d45870b1e78b1b91263a45748ef0fbfbd3a7262f4af78daeca07984c3f4cba4c5da67c4c3f0347'),
#   329 does not build in our configuration
    ('330', '3886745179ebabc10feea401444a153dc3f9e5f4c91da381870857fe21f514e0e975193af498b7c2b365602f833dd08e6c706e25cfc1e687d565125672136b62'),
    ('331', '88229d682553d4780c7b9c081bba6396f319ecd17461dd344478ae6456e35aff9d7a7411d863d35a03886d9a6b082b5d3325fbb990cea22cb82970173f6f3347'),
    ('332', 'a453f6bc4690d9981417e910a020e3ad4ad8e985f5c3ff368c390fad61d32a296d9f48b08d604748a3b87c16800d5b1cba2b24091d2bc821d7775f1a43330d02'),
    ('333', '90c5d8d3d039417915d40d22fcc6244d1c86e8bcc39d865ba6cb67fc9d1ff6e0f3ee79da06a094d23f6801195f0baa26564a553d04c974d62a331016118215a0'),
    ('334', '6a164b2b4277bcfa91a9a864203f13526cd03ae0da7025d1fe39602388e13fabd4571718197ca9f8313fc57139dc4eb802d1d83e90fdeeb9cef7a4204726f419'),
    ('335', '386c3f4c9b3ee7750c4f03316fc94dfc6601d82b0fbac5714031e9e3c6f1acf5c949689fcc58deb8569516977eb88173356d3c890a263b7a1d0f383190a43362'),
    ('336', '0441fd4020f6926d4e7704cf5fab0d03a966d2673783149c6eb0eaa50832de7a2b92bf204ddd590584d86e223cea26ea42d138d50732c564720dab3379da9655'),
    ('337', 'fad31aa971a42cf38d3e3db2edc615b408d92226c305654b9276592c6dee075f31c7f082a3f549284f1685a31d5d9dedbda99c2c308a90bd741958f862806609'),
    ('338', '0b4e471b26c07999d627ca6b4ec63769038be24157aeb873122d5da026efd6d2b56f1cb562c46d744aae88347c4e3807fbf407289c0222fb953fef981ca619fa'),
    ('339', '2a2e6c13a22408a03a6244bf655547d79cd5cb320ec1704e5ecce4eebd3530a51c3f02e336fe582ea09824abe6e87ea937abebdd4d68d508a9a85aa3566cc2fc'),
    ('340', '9a150741868fb681e71f4e3644748ea62fd73f9babbbe0baaca24f8c65d96c2ca434abcca713c2d337ec83e2264903b0f98fa6c9dbc3e3ac19c69a98d4c0a033'),
    ('341', '336b8e8d3bfbc373ce1a0547571f705401142b54a8206050d2cdf961dfd99e01c9e78e10df443eb3278fb02116536cf55bc1501835978b9b390399614ab77494'),
    ('342', 'd15aa55eb6805a6ac906b7507976e34ed7d1a36d4d8d4c2e9a1eabc451aa812dd2e7a587c7018a80073762f14f769c67869e943d2594e72aee2caa53a964c399'),
    ('343', '52c06ced7bf0c0177f5b5ae92654191c31d36b7337173b483f9914ebb7468f26db9393347ea8d9708c5f668048ad48e8254b4dbe5be097604cd94b4f38dfc775'),
    ('344', '872f69e13ad8e26de355f7611dabc7a66e2f6b00313b440b8054cc4fa0fbde936dd8d54ec09c892e8760080acaccbd8b7e72cdcbebb291dd92e01593eb14e91a'),
)


for xterm_version, xterm_sha in xterm_versions:
    with open('de.uchuujin.fp.termzoo.xterm{}.json'.format(xterm_version), "w") as f:
        f.write(XTERM_TEMPLATE.substitute(xterm_version=xterm_version, xterm_sha=xterm_sha))


